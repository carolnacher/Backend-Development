<% if (title) { %>
    <h1><%= title %></h1>
<% } else { %>
    <h1>Update account information</h1>
<% } %>

<%- messages() %>

<% if (typeof errors !== 'undefined' && errors) { %>
    <ul class="notice">
        <% errors.array().forEach(error => { %>
            <li><%= error.msg %></li>
        <% }) %>
    </ul>
<% } %>

<div class="update-forms">

    <h2>Account Update</h2>
    <p class="notice">Fields marked with (*) are required.</p>
    
    <form id="updateAccountForm" action="/account/update" method="post">
        
        <fieldset>
            <legend> Personal Information</legend>
            
            <label for="account_firstname">Name: (*)</label>
            <input type="text" 
                id="account_firstname" 
                name="account_firstname" 
                required 
                value="<%= locals.account_firstname || account.account_firstname %>">

            <label for="account_lastname">Last Name: (*)</label>
            <input type="text" 
                id="account_lastname" 
                name="account_lastname" 
                required 
                value="<%= locals.account_lastname || account.account_lastname %>">

            <label for="account_email">E-mail: (*)</label>
            <input type="email" 
                id="account_email" 
                name="account_email" 
                required 
                value="<%= locals.account_email || account.account_email %>">
            
            <input type="submit" value="Actualizar Información" class="submit-btn">
            
            <input type="hidden" name="account_id" value="<%= account.account_id %>">
        </fieldset>
    </form>
    
    <hr>
    
    <h2>Change Password</h2>
    <p class="notice">
        When you enter a new password, it will replace your current one.
Make sure the new password meets the following requirements:
        <ul>
            <li>Must be at least 12 characters.</li>
            <li>Must contain at least 1 capital letter, 1 number and 1 special character.</li>
        </ul>
    </p>

    <form id="updatePasswordForm" action="/account/update/password" method="post">
        
        <fieldset>
            <label for="account_password">New Password: (*)</label>
            <input type="password" 
                id="account_password" 
                name="account_password" 
                required 
                pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9\s]).{12,}" 
                title="The password must be at least 12 characters long and contain at least 1 capital letter, 1 number, and 1 special character.">
            
            <input type="submit" value="Cambiar Contraseña" class="submit-btn">
            
            <input type="hidden" name="account_id" value="<%= account.account_id %>">
        </fieldset>
    </form>

</div>